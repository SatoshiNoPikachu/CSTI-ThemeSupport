# 主题支持（Theme Support）- CSTI MOD



## 简介

主题支持（Theme Support）是一个功能类Mod，为Mod作者提供更换游戏主题风格的功能，如游戏封面、背景等。



当前版本：2.1.0

By.サトシの皮卡丘



## 安装说明

需安装前置模组：模组核心(ModCore) v3.0.0+。

请将模组压缩包解压于 BepInEx\plugins 文件夹下。

> Tips：更新模组时，需先删除旧版本模组文件后再解压。

> Tips：如果出现模组不运行的问题，请删除 BepInEx/cache 目录后再启动游戏。



## 使用说明

> Tips：该内容供模组作者阅读。
>



### 安装 ModEditor-JsonData

将**本Mod**目录中的 “CSTI-JsonData” 文件夹复制到 ModEditor 的根目录中，即可使 ModEditor 支持主题。



### 创建元数据文件

1. 在模组根目录中创建名为 "ModMeta.json" 的JSON文件。

2. 使用文本编辑器打开文件，输入以下文本，并在空的双引号中输入模组的命名空间，用于为模组的所有数据对象名称进行前缀标识：

   ```json
   {
     "Namespace": ""
   }
   ```

   > Tips：该文件还支持更多字段，请参见模组“模组列表”的 “README” 文件。

3. 保存文件后，模组核心可以加载模组中“Data”目录或根目录（当不存在“Data”目录）下的数据。



### 添加主题资源

1. 在 Mod 的 “Resource” 文件夹中创建名为 “Texture2D” 的文件夹。
2. 将图片资源文件（PNG、JPG格式）放入 “Texture2D” 文件夹中。

> Tips：资源的文件名是唯一标识（不包含扩展名），请注意防止命名冲突！
>
> Tips：ModEditor 无法索引纹理资源，请在弹出的引用窗口中输入文件名称（勿需拓展名）后点击 “OK” 按钮即可完成引用。

> Tips：可以在 “Texture2D” 文件夹中创建子文件夹来分类存放图片，但是文件夹名称不作为标识，因此需确保不同子文件夹中的文件名彼此不重复。



### 自定义封面

#### 创建封面主题

1. 在 Mod 的 “ScriptableObject” 文件夹中创建名为 “Theme-Cover” 的文件夹。
2. 在 ModEditor 中导入 Mod 项目。
3. 在左侧文件列表中找到并右击 “Theme-Cover” 文件夹，在弹出菜单中选择“新建文件”。
4. 在弹出窗口中输入创建的封面名称（无实际作用），选择模板，并点击 “OK” 按钮即可完成创建。

Tips：封面名称虽然无实际作用，但仍然是唯一标识，请注意防止命名冲突！



#### 设置封面内容

1. 在 ModEditor 中打开创建好的封面。
2. 点击“隐藏未激活属性“按钮。
3. 根据需求，填写 “CoverImageName”、“Title”、“BGM” 等字段。

Tips：各Mod的各个封面主题会在显示封面时随机选取一个。



### 自定义游戏背景

#### 创建游戏背景

1. 在 Mod 的 “ScriptableObject” 文件夹中创建名为 “Theme-GameBack” 的文件夹。
2. 在 ModEditor 中导入 Mod 项目。
3. 在左侧文件列表中找到并右击 “Theme-GameBack” 文件夹，在弹出菜单中选择“新建文件”。
4. 在弹出窗口中输入创建的背景名称（无实际作用），选择模板，并点击 “OK” 按钮即可完成创建。

Tips：封面名称虽然无实际作用，但仍然是唯一标识，请注意防止命名冲突！



#### 设置游戏背景

1. 在 ModEditor 中打开创建好的游戏背景。
2. 点击“隐藏未激活属性“按钮。
3. 根据需求，填写 “Card”、“XxxSet”、“ConditionSets” 等字段。



#### 游戏背景尺寸参考

| 背景类型         | 尺寸（宽，高） |
| ---------------- | -------------- |
| 环境（Env）      | 1310, 357.5    |
| 基地（Base）     | 1360, 357.5    |
| 手牌（Hand）     | 1360, 355.3656 |
| 可探索（Exp）    | 250, 357.5     |
| 过滤器（Filter） | 100, 357.5     |
| 书签（Bookmark） | 100, 355.3656  |



## 更新日志

### Version 2.1.0

注意：从本次更新开始将不再支持在 Unity 2019 环境中运行（游戏版本 v1.05ad 及以下）。

1. 目标框架由 net48 升级至 netstandard2.1。
2. 适配模组核心 v3.0.0+，旧版本不再兼容与支持。



### Version 2.0.2

新增卡牌唯一拓展（Theme-CardUniEx），当前支持隐藏卡牌库存信息。



### Version 2.0.1

1. 依赖模组更新：模组核心（ModCore）v2.0.1+，旧版本不再兼容。
2. 图像替换器现在适配模组核心了，旧版本皮肤包不再直接支持。



### Version 2.0.0 [重要更新]

1. 新增依赖模组：模组核心（ModCore）v2.0.0+。
2. 移除所有加载与数据等与模组核心相关功能，由模组核心统一维护，以增强功能、提高性能以及修复问题。
3. 旧版本加载规则已过时废弃，模组开发者请参考使用说明中“创建元数据文件”以及“添加主题资源”章节。
4. 图像名称相关字段已变更为图像引用，以提高性能，模组开发者需重新安装ModEditor-JsonData，并编辑相关字段。



### Version 1.1.3

新增图像替换器，支持为卡牌、遭遇、特质、状态等替换图像。



### Version 1.1.2

1. 修复游戏背景因条件组不满足而失效时，背景未正常恢复的问题。
2. 隐藏了环境栏背景的边框。
3. 隐藏了环境槽位的背景。



### Version 1.1.1

修复在游戏背景完成第一次卡牌绑定时会导致绑定提前结束的问题。



### Version 1.1.0

新增自定义游戏背景功能